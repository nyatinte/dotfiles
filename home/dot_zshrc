#!/usr/bin/env zsh

ZSH_CONFIG_DIR="${HOME}/.zsh.d"

# 各設定ファイルを読み込み
source "${ZSH_CONFIG_DIR}/path.zsh"
source "${ZSH_CONFIG_DIR}/dev-tools.zsh"
source "${ZSH_CONFIG_DIR}/aliases.zsh"
source "${ZSH_CONFIG_DIR}/fzf.zsh"
[ -f "${ZSH_CONFIG_DIR}/.local.zsh" ] && source "${ZSH_CONFIG_DIR}/.local.zsh"

# 補完システムの初期化
fpath+=(${ZSH_CONFIG_DIR}/completions)

source "${ZSH_CONFIG_DIR}/completions/_git-gtr"

# Sheldon (キャッシュファイルを直接読み込み)
cache_file="${XDG_CONFIG_HOME:-$HOME/.config}/sheldon/plugins.zsh"
if [[ ! -r "$cache_file" || "${XDG_CONFIG_HOME:-$HOME/.config}/sheldon/plugins.toml" -nt "$cache_file" ]]; then
  sheldon lock --update
fi
source "$cache_file"

# Starship
eval "$(starship init zsh)"
