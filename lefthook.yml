# EXAMPLE USAGE:
#
#   Refer for explanation to following link:
#   https://lefthook.dev/configuration/
#
pre-push:
  jobs:
    - name: check chezmoi diff
      run: |
        diff_output=$(chezmoi diff --no-pager)
        if [ -n "$diff_output" ]; then
          echo "$diff_output"
          echo ""
          echo "❌ Error: There are unapplied chezmoi changes. Please run 'chezmoi apply' first."
          exit 1
        fi

pre-commit:
  parallel: true
  commands:
    prettier-check:
      glob: "*.{json,yml,yaml,md}"
      run: npx prettier --check {staged_files}
    shfmt-check:
      glob: "*.{sh,zsh,bash}"
      run: shfmt -d -i 2 {staged_files}
    shellcheck:
      glob: "*.{sh,zsh,bash}"
      run: shellcheck {staged_files} || echo "⚠️  shellcheck not found, skipping lint check"
